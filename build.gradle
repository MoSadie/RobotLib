plugins {
    id "java"
    id "eclipse"
    id "idea"
	id "maven"
    id "edu.wpi.first.GradleRIO" version "2019.0.0-alpha-3"
}

// Instructions on how to build this project:
// In the main folder of this project (the one with the gradlew.bat file) run the command "./gradlew.bat build" (or "gradlew build" if on a non-Windows platform)
// The jars will be in the "build" folder under "libs"

// This section is to prevent people from accidently deploying this project to a robot. 
deploy {
    for (String task : project.gradle.startParameter.taskNames) {
        if (task == "deploy")
            throw new GradleException("This is a library project! You can't deploy it to a robot!")
    }
}

// Defining my dependencies. In this case, WPILib (+ friends), CTRE Phoenix (Talon SRX)
// and NavX.
dependencies {
    compileOnly wpilib()
    compileOnly ctre()
    compileOnly navx()

    // For reference, here are a few more of the easy to add libraries not currently used:
    //compileOnly pathfinder()
    //compileOnly openrioMatchData()

    // Quick guide to keywords:
    // compile includes the library inside the final jar.
    // compileOnly doesn't, but expects the used depencies to exist somewhere else. (Ex. Using compile keywork in a main robot project)
}

// Create Sources Jar
task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

// When Javadoc is created (./gradlew.bat javadoc) it will be in this directory in the project folder.
javadoc {
    destinationDir = new File("docs")
}

// Create Javadoc Jar
task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

// Additional artifacts to publish for JitPack
artifacts {
    archives sourcesJar
    archives javadocJar
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.9'
}